import{k as x,u as I,o as d,c,l as V,t as l,e,F as p,m as _,f as a,b,w as f,n as $,p as C,q as y}from"./app-bfa694d2.js";const D=e("div",{"text-4xl":""},[e("div",{"i-skill-icons:devto-dark":"","inline-block":""})],-1),T=e("p",null,null,-1),E=e("p",null," flight tracking page",-1),A=e("p",null," Page's under construction ",-1),B={class:"m-auto max-w-5xl rounded shadow-md"},q=e("thead",null,[e("tr",null,[e("th",{class:"w-1/3 border border-r-0 border-gray-300 bg-gray-100 p-4 font-normal sm:w-1/4"}," Flight "),e("th",{class:"w-1/3 border border-r-0 border-gray-300 bg-gray-100 p-4 font-normal sm:w-1/4"}," ETA "),e("th",{class:"w-1/3 border border-r-0 border-gray-300 bg-gray-100 p-4 font-normal sm:w-1/4"}," Status ")])],-1),N={class:"w-1/3 border border-r-0 border-gray-300 bg-white p-4 font-normal sm:w-1/4"},P={class:"w-1/3 border border-r-0 border-gray-300 bg-white p-4 font-normal sm:w-1/4"},R={class:"w-1/3 border border-r-0 border-gray-300 bg-white p-4 font-normal sm:w-1/4"},U=e("div",{"py-4":""},null,-1),G={id:"message"},H=e("p",{id:"message"}," user.trackedFlights : ",-1),L=["onClick"],O=Object.assign({name:"FlightsTracker"},{__name:"flightTracker",setup(X){const u=new Date,k=u.getFullYear().toString(),w=`0${u.getMonth()+1}`.slice(-2),g=`0${u.getDate().toString()}`.slice(-2),F=`${k}-${w}-${g}`,t=x();t.savedKey=localStorage.getItem("access_key");let n="";localStorage.getItem("tracked_flights")&&(t.trackedFlights=t.trackedFlights.concat(localStorage.getItem("tracked_flights").split(",").filter(r=>!t.trackedFlights.includes(r)))),I();function v(){return n[0].time.other.eta?new Date(n[0].time.other.eta*1e3).toLocaleString():"Scheduled"}async function K(){t.trackedFlights.forEach(async r=>{const s={method:"GET",url:"https://flight-radar1.p.rapidapi.com/flights/get-more-info",params:{query:r,fetchBy:"flight",page:"1",limit:"100"},headers:{"X-RapidAPI-Key":t.savedKey,"X-RapidAPI-Host":"flight-radar1.p.rapidapi.com"}};try{n=await(await $.request(s)).data.result.response.data.filter(o=>`0${new Date(o.time.scheduled.arrival*1e3).getDate().toString()}`.slice(-2)===g),n[0]&&await t.listedFlights.push({flight:n[0].identification.number.default,arr_time:v(),status:n[0].status.text})}catch(i){console.error(i)}})}function S(r){t.trackedFlights.splice(r,1),localStorage.setItem("tracked_flights",t.trackedFlights)}function m(){t.savedKey=t.inputKey,localStorage.setItem("access_key",t.inputKey),t.inputKey=""}function h(){t.trackedFlights.push(t.inputFlight),localStorage.setItem("tracked_flights",t.trackedFlights),t.inputFlight=""}return t.listedFlights=[],(r,s)=>{const i=C;return d(),c("div",null,[D,T,V(l(F)+" "),E,A,e("div",null,[e("table",B,[q,(d(!0),c(p,null,_(a(t).listedFlights,o=>(d(),c("tbody",{key:o._id},[e("tr",null,[e("td",N,l(o.flight),1),e("td",P,l(o.arr_time),1),e("td",R,l(o.status),1)])]))),128))]),e("button",{"m-3":"","text-sm":"",btn:"",onClick:K}," Go ")]),U,b(i,{id:"input",modelValue:a(t).inputKey,"onUpdate:modelValue":s[0]||(s[0]=o=>a(t).inputKey=o),placeholder:"enter aviationStack access key ",autocomplete:"true",onKeydown:f(m,["enter"])},null,8,["modelValue","onKeydown"]),e("button",{"m-3":"","text-sm":"",btn:"",onClick:m}," Save "),e("p",null,[b(i,{id:"input2",modelValue:a(t).inputFlight,"onUpdate:modelValue":s[1]||(s[1]=o=>a(t).inputFlight=o),placeholder:" example EK211 ",autocomplete:"true",onKeydown:f(h,["enter"])},null,8,["modelValue","onKeydown"]),e("button",{"m-3":"","text-sm":"",btn:"",onClick:h}," Add ")]),e("p",G," user.savedKey : "+l(a(t).savedKey),1),H,(d(!0),c(p,null,_(a(t).trackedFlights,o=>(d(),c("button",{key:o._id,"m-1":"","bg-red":"",onClick:j=>S(a(t).trackedFlights.indexOf(o))},l(o),9,L))),128)),e("div",null,[e("button",{"m-3":"","text-sm":"",btn:"",onClick:s[2]||(s[2]=(...o)=>r.go_home&&r.go_home(...o))}," Home ")])])}}});typeof y=="function"&&y(O);export{O as default};
